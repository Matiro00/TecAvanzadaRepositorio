<!DOCTYPE html>
<html lang="en" >

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="/public/css/style.css">
    <title>Chat</title>

</head>

<body class="background">
    <header class="titulo">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark navbar-custom">
            <div class="usuario">
                <h1>Usuario conectado: <strong>
                        <%= name %>
                    </strong></h1>
            </div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-buttons"
                aria-controls="navbar-buttons" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse in navbar-buttons" id="navbar-buttons">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item">

                        <a href="home" onclick="leaveSaving()" class="btn btn-outline-success my-2 my-sm-0">Retirarse de
                            la
                            sala</a>
                    </li>
                    <li class="nav-item">

                        <a href="home" class="btn btn-outline-warning my-2 my-sm-0">Retirarse de la
                            sala sin guardar los mensajes</a>
                    </li>
                    <li class="nav-item">
                        <a href="logout" class="btn btn-outline-danger my-2 my-sm-0"><svg
                                xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-power" viewBox="0 0 16 16">
                                <path d="M7.5 1v7h1V1h-1z" />
                                <path
                                    d="M3 8.812a4.999 4.999 0 0 1 2.578-4.375l-.485-.874A6 6 0 1 0 11 3.616l-.501.865A5 5 0 1 1 3 8.812z" />
                            </svg></a></button>
                    </li>

                </ul>
            </div>
        </nav>


    </header>
    <div class="waves-container">
    <div class="container container-chat">
        <header>
            <h1 class="titulo-salas">Sala conectada: <%= room %>
            </h1>
        </header>
        <div class="row">
            <div class="col-3 ">
                <div class="container ">
                    <div class="row">
                        <h2 class="titulo-list user-list">
                            Usuarios
                        </h2>
                        <ul id="usuarios-lista" class="list-user-container">
                        </ul>
                    </div>
                </div>
            </div>
            <div class="container col-9">
                <div class="container container-mensajes" id="chat">
                    <% if(typeof message !="undefined" ){%>
                        <%for(let i=0;i<message.length;i++){%>
                            <div class="mensaje">
                                <p class="emisor bold">
                                    <%= message[i].emisor%> : <span>
                                            <%= message[i].tiempo%>
                                        </span>
                                </p>
                                <p class="contenido padding-bottom">
                                    <%= message[i].contenido%>
                                </p>
                            </div>
                            <%}%>
                                <%}%>
                                    <div class="mensaje"></div>
                </div>
                <div class="container-form">
                    <form id="chat-input">
                        <div class="row">
                            <div class="col-10">
                                <input type="text" placeholder="Escribite algo..." class="form-control text-bar"
                                    id="mensaje" />
                            </div>
                            <div class="container col-2">
                                <button type="submit" class="btn boton-enviar">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-send" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd"
                                            d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z" />
                                    </svg>
                                </button>

                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
    <defs>
        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
    </defs>
    <g class="parallax">
        <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(154,205,50,0.7)" />
        <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(40,40,40,0.5)" />
        <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(0,0,0,0.5)" />
        <use xlink:href="#gentle-wave" x="48" y="7" fill="rgba(40,40,40,0.5)" />
    </g>
</svg>
</div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/public/scripts/socket.js"></script>

</body>

</html>